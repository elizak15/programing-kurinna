#Лабораторна робота № 15. Динамічні масиви

## 1 ВИМОГИ

### 1.1 Розробник

* Курінна Єлизавета Ігорівна;
* студент групи КН-921г;
* 4-травня-2022

### 1.2 Загальне завдання

Функція запису, читання структури, функція для пошуку і сортуванням за деякими полями


## 2 ОПИС ПРОГРАМИ

### 2.1 Функціональне призначення

Програма призначена для запису, читання структури, для пошуку і сортуванням за деякими полями

При генерації  числа діють наступні *обмеження*:

- дані в структуру *trains* передаються через файл input.txt

Результат зберігається у структурах   *Ms* i *trains*.

Демонстрація знайдених результатів передбачає покрокове виконання програми в режимі налагодження.

### 2.2 Опис логічної структури

Головна функція визиває наступну функцію: `void scan_structure(FILE *input, struct Train *trains, int size)`



Опис розроблених структур і функцій наводиться на базі результатів роботи системи автодокументування *Doxygen*.

### 2.2.1 Функція зчитування даних х файлу

```c

void scan_structure(FILE *input, struct Train *trains, int size);


```

*Призначення*: читання з файлу структури


*Опис роботи*: функції передається файл з якого зчитати, структура в яку вписати дані і кількість полів

**Аргументи**: 
-*input* - файл з якого зчитати
- *trains* - структура в яку впишуться дані
-*size* -  перемінна, яка передається з файлу

### 2.2.2 Функція запису даних у файл

```c

void print_structure(FILE *output, struct Train *trains, int size);


```

*Призначення*: запис в файл структури


*Опис роботи*: функції передається файл в який вписати дані, структура  яку вписати  і кількість полів

**Аргументи**: 
-*output* - файл з якого зчитати
- *trains* - структура в яку впишуться дані
-*size* -  перемінна, яка передається з файлу


### 2.2.3 Функція пошуку за полем

```c

struct Train *find_train(struct Train* trains, int size);


```

*Призначення*: пошук за полями структури


*Опис роботи*: функції передається назва структури  і кількість полів

**Аргументи**: 
- *trains* - структура в якій буде пошук
-*size* -  перемінна, яка передається з файлу

### 2.2.4 Функція сортування за полем

```c

struct Train *sorting_train(struct Train* trains, int size);


```

*Призначення*: сортування за полями структури


*Опис роботи*: функції передається назва структури  і кількість полів

**Аргументи**: 
- *trains* - структура в якій буде сортування
-*size* -  перемінна розміру

### 2.2.5 Функція додавання об'єкта
```c

struct Train *add_at_the_end(struct Train* trains, int size2);


```

*Призначення*: добавлення об'єкта


*Опис роботи*: функції передається назва структури  і кількість полів

**Аргументи**: 
- *trains* - структура в яку будуть внесені зміни
-*size2* -  перемінна розміру

### 2.2.6 Функція видалення

```c

struct Train *delete_object(struct Train* trains, int size3);


```

*Призначення*: видалення об'єкта


*Опис роботи*: функції передається назва структури  і кількість полів

**Аргументи**: 
- *trains* - структура в яку будуть внесені зміни
-*size3* -  перемінна розміру


###2.2.3 Основна функція

```c

int main()

```
![Поля структури main](assets/1.png)
*Призначення*: головна функція.

*Опис роботи*:

- вводимо перемінні, надаємо їм тип даних;
- виділяємо пам'ять для структури;
- визов всіх функцій з файлу entity.h, list.h
-звільнення пам'яті;
- повертає функція код повернення з програми (0).


####2.2.4 Структура проекту

```

        └── lab15

            ├── Doxyfile

            ├── Makefile

            ├── README.md

            ├── assets
            │
                  └── input.txt

            ├── doc

            │   └── lab15.md

            ├── src

            │   └── main.c

            │   └── entity.c 

            │   └── entity.h
            │   └── list.c 
            │   └── list.c 


```

### 2.3 Важливі фрагменти програми

#### 2.3.1 Початкові дані. Константи, перерахування

```c

int size;
int size1;

```

#### 2.3.2 Передання даних з файлу 
```c
void scan_structure(FILE *input, struct Train *trains, int size){
//      FILE *input;
        //прописуємо шлях ДО файлу
        char* file = (char*)malloc(100 * sizeof(char));
        strcpy(file, "/home/eliza/programing-kurinna/lab14/assets/");
        //прописуємо шлях до файлу разом з цим файлом
        char *inputp = (char*)malloc(100 * sizeof(char));
        strcpy(inputp, "/home/eliza/programing-kurinna/lab14/assets/");
        strcat(inputp, "input.txt");
        //строка в яку можна ввести назву файлу
        char *newin = (char*)malloc(100 * sizeof(char));
        printf("\n Введіть назву файлу, з якого зчитати дані (.txt) : \n");
        scanf("%s", newin);
        strcat(newin, ".txt");
        strcat(file, newin);
        //перевірка
        if((input = fopen(inputp, "r")) == NULL)
        {printf("Такого файлу не знайдено");
        //відкриваємо файл для читання                                                         
       input = fopen(inputp, "r");}
        for(int i = 0; i < size; i++){
        fscanf(input, "%d", &(trains + i)->fix);
        fscanf(input, "%s", (trains + i)->number);
        fscanf(input, "%d", &(trains + i)->count);
        fscanf(input, "%s", (trains + i)->start_end.start);
        fscanf(input, "%s", (trains + i)->start_end.end);
        fscanf(input, "%s", (trains + i)->type);}
        fclose(input);}




```
#### 2.3.3 Виділення пам'яті для структури
        

```c
struct Train *trains = (struct Train*)malloc(size * sizeof(struct Train));
        for( i = 0; i < size; i++){
        (trains + i)->fix = (int*)malloc(size1 * sizeof(int));
         (trains + i)->number = (char*)malloc(size1 * sizeof(char));
         (trains + i)->count = (int*)malloc(size1 * sizeof(int));  
        (trains + i)->start_end.start = (char*)malloc(size1 * sizeof(char));
        (trains + i)->start_end.end = (char*)malloc(size1 * sizeof(char));
        (trains + i)->type = (char*)malloc(size1 * sizeof(char));}




```


## 3 ВАРІАНТИ ВИКОРИСТАННЯ

Для демонстрації результатів кожної задачі використовується:

- покрокове виконання програми в утиліті lldb.

**Варіант використання 1**: послідовність дій для запуску програми у режимі відлагодження:

- запустити програму у відлагоднику lldb;
- поставити точку зупинки на функції main (строка з `return 0;`);
- запустити програму;
- подивитись результати виконання програми

```
(lldb) r
Process 9474 launched: '/home/eliza/programing-kurinna/lab13/dist/main.bin' (x86_64)
Автор: Курінна Єлизавета Ігорівна КН-921г. Лабораторная работа №15. Динамічні масиви

 Введіть назву файлу, з якого зчитати дані (.txt) : 
input

 Введіть назву файлу, в який хочете записати результат: (.txt) : 
out
Назва файлу в який буде передано результат  /home/eliza/programing-kurinna/lab15/assets/out.txt
Дані про ремонт: 1, Номер потягу: A12, Кількість вагонів: 1, Початковий маршрут: Франція, Кінцевий маршрут: Україна, Тип потягу: Паравоз 
Дані про ремонт: 0, Номер потягу: B13, Кількість вагонів: 2, Початковий маршрут: Іспанія, Кінцевий маршрут: Україна, Тип потягу: Тепловоз 
Дані про ремонт: 1, Номер потягу: C14, Кількість вагонів: 1, Початковий маршрут: Італія, Кінцевий маршрут: Україна, Тип потягу: Паровоз 
Дані про ремонт: 0, Номер потягу: D15, Кількість вагонів: 4, Початковий маршрут: Німеччина, Кінцевий маршрут: Україна, Тип потягу: Електропотяг 
Дані про ремонт: 1, Номер потягу: E16, Кількість вагонів: 12, Початковий маршрут: Польща, Кінцевий маршрут: Україна, Тип потягу: Електропотяг 

Дані про потяги, якi потребують ремонт і мають кількість вагонів більше 10
Дані про ремонт: 1, Номер потягу: E16, Кількість вагонів: 12, Початковий маршрут: Польща, Кінцевий маршрут: Україна, Тип потягу: Електропотяг 

Сортування за кількістю вагонів:
Дані про ремонт: 1, Номер потягу: A12, Кількість вагонів: 1, Початковий маршрут: Франція, Кінцевий маршрут: Україна, Тип потягу: Паравоз 
Дані про ремонт: 1, Номер потягу: C14, Кількість вагонів: 1, Початковий маршрут: Італія, Кінцевий маршрут: Україна, Тип потягу: Паровоз 
Дані про ремонт: 0, Номер потягу: B13, Кількість вагонів: 2, Початковий маршрут: Іспанія, Кінцевий маршрут: Україна, Тип потягу: Тепловоз 
Дані про ремонт: 0, Номер потягу: D15, Кількість вагонів: 4, Початковий маршрут: Німеччина, Кінцевий маршрут: Україна, Тип потягу: Електропотяг 
Дані про ремонт: 1, Номер потягу: E16, Кількість вагонів: 12, Початковий маршрут: Польща, Кінцевий маршрут: Україна, Тип потягу: Електропотяг 
Номер потяга, який хочете видалити 2
Дані про ремонт: 1, Номер потягу: A12, Кількість вагонів: 1, Початковий маршрут: Франція, Кінцевий маршрут: Україна, Тип потягу: Паравоз 
Дані про ремонт: 0, Номер потягу:  - , Кількість вагонів: 0, Початковий маршрут:  - , Кінцевий маршрут: Україна, Тип потягу:  -   
Дані про ремонт: 0, Номер потягу: B13, Кількість вагонів: 2, Початковий маршрут: Іспанія, Кінцевий маршрут: Україна, Тип потягу: Тепловоз 
Дані про ремонт: 0, Номер потягу: D15, Кількість вагонів: 4, Початковий маршрут: Німеччина, Кінцевий маршрут: Україна, Тип потягу: Електропотяг 
Дані про ремонт: 1, Номер потягу: E16, Кількість вагонів: 12, Початковий маршрут: Польща, Кінцевий маршрут: Україна, Тип потягу: Електропотяг 
Хочете додати ще один потяг? 0 - ні , 1 - так 
1

 Чи потребує потяг № 6 ремонту: 1

 Номер потягу № 6: D34

 Кількість вагонів у потягу № 6: 4

  Потяг № 6 прямує з: Poland

  Потяг № 6 прямує в: Ukraine

  Тип потягу № 6: Eng
Дані про ремонт: 1, Номер потягу: A12, Кількість вагонів: 1, Початковий маршрут: Франція, Кінцевий маршрут: Україна, Тип потягу: Паравоз 
Дані про ремонт: 0, Номер потягу:  - , Кількість вагонів: 0, Початковий маршрут:  - , Кінцевий маршрут: Україна, Тип потягу:  -   
Дані про ремонт: 0, Номер потягу: B13, Кількість вагонів: 2, Початковий маршрут: Іспанія, Кінцевий маршрут: Україна, Тип потягу: Тепловоз 
Дані про ремонт: 0, Номер потягу: D15, Кількість вагонів: 4, Початковий маршрут: Німеччина, Кінцевий маршрут: Україна, Тип потягу: Електропотяг 
Дані про ремонт: 1, Номер потягу: E16, Кількість вагонів: 12, Початковий маршрут: Польща, Кінцевий маршрут: Україна, Тип потягу: Електропотяг 
Дані про ремонт: 1, Номер потягу: D34, Кількість вагонів: 4, Початковий маршрут: Poland, Кінцевий маршрут: Ukraine, Тип потягу: Eng 



Покриття коду
Filename                                           Regions    Missed Regions     Cover   Functions  Missed Functions  Executed       Lines      Missed Lines     Cover
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
/home/eliza/programing-kurinna/lab15/src/                 37                 7    50.82%           3                 0   54.00%          14                 4    71.43%
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
                           TOTAL                                                   37                 7    50.82%           3                 0   54.00%    
```
## ВИСНОВКИ

При виконанні даної лабораторної роботи було набуто практичного досвіду роботи з файлами та зчитування даних з файлу для структур, механізмами виводу/вводу, виділенням і звільненням пам'яті, розробці модульного теста для перевірки коду та його реалізаціїї

